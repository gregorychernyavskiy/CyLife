stages:
  - mavenbuild

maven-build:
  stage: mavenbuild
  before_script:
    - export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
    - export PATH=$JAVA_HOME/bin:$PATH
    - export M2_HOME=/home/cherzy/maven
    - export PATH=$M2_HOME/bin:$PATH
    - echo "JAVA_HOME=$JAVA_HOME"
    - java -version
    - mvn --version
  tags:
    - Greg
  script:
    - cd Backend/CyLife
    - mvn clean package
  only:
    refs:
      - greg_cicd
    changes:
      - Backend/**/*
debug:
  stage: mavenbuild
  tags:
    - Greg
  script:
    - echo "JAVA_HOME=$JAVA_HOME"
    - java -version
    - echo "Maven Path: $(which mvn)"
    - mvn --version
